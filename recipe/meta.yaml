{% set name = "libmagic" %}
{% set version = "5.35" %}
{% set hash_val = "30c45e817440779be7aac523a905b123cba2a6ed0bf4f5439e1e99ba940b5546" %}

package:
  name: libmagic
  version: {{ version }}

source:
  fn: file-{{ version }}.tar.gz
  url: ftp://ftp.astron.com/pub/file/file-{{ version }}.tar.gz
  sha256: {{ hash_val }}

build:
  number: 1000
  skip: True  # [win]

requirements:
  build:
    - automake
    - autoconf
    - m4
    - libtool
    - {{ compiler('c') }}

test:
  commands:
    - "file --help &> /dev/null"
    - "test -r $CONDA_PREFIX/lib/libmagic.so"  # [linux]
    - "test -r $CONDA_PREFIX/lib/libmagic.dylib"  # [osx]
    - "conda inspect linkages -p $PREFIX $PKG_NAME"  # [linux]
    - "conda inspect objects -p $PREFIX $PKG_NAME"  # [osx]

about:
  home: http://www.darwinsys.com/file/
  summary: "Implementation of the file(1) command"
  license: BSD-2
  license_family: BSD
  license_file: COPYING

extra:
  recipe-maintainers:
    - mariusvniekerk
